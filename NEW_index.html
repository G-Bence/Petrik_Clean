<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <title>Document</title>
    <style>
        .plan-wrap {
            position: relative;
            width: 100%;
            max-width: 900px;
            /* optional */
            margin: 0 auto;
            /* optional */
        }

        .plan-img {
            display: block;
            width: 100%;
            height: auto;
        }

        .pin {
            position: absolute;
            transform: translate(-50%, -50%);
            /* center on the point */
            z-index: 2;

            /* mobile-friendly tap size */
            width: 36px;
            height: 36px;
            border-radius: 999px;
            display: grid;
            place-items: center;
            padding: 0;
        }
    </style>
</head>

<body>
    <div class="plan-wrap">
        <img src="./public/Building_A_Male_Toilet_ALL_IN_ALL.svg" alt="Toilet block floor plan" class="plan-img">

        <!-- Example buttons -->
        <button class="pin btn btn-danger btn-sm" style="left: 18%; top: 42%;" data-bs-toggle="modal"
            data-bs-target="#reportModal" data-item="Toilet paper">
            !
        </button>

        <button class="pin btn btn-warning btn-sm" style="left: 62%; top: 35%;" data-bs-toggle="modal"
            data-bs-target="#reportModal" data-item="Soap">
            !
        </button>
    </div>

    <!-- Bootstrap modal -->
    <div class="modal fade" id="reportModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <form class="modal-content" id="reportForm">
                <div class="modal-header">
                    <h5 class="modal-title">Report issue</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <div class="mb-2">
                        <label class="form-label">Item</label>
                        <input class="form-control" id="itemField" name="item" readonly>
                    </div>

                    <div class="mb-2">
                        <label class="form-label">Message</label>
                        <textarea class="form-control" name="message" rows="3"
                            placeholder="What is missing / what needs cleaning?"></textarea>
                    </div>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-bs-dismiss="modal">Cancel</button>
                    <button class="btn btn-primary" type="submit">Send</button>
                </div>
            </form>
        </div>
    </div>


    <script>
        const reportModal = document.getElementById('reportModal');
        reportModal.addEventListener('show.bs.modal', (event) => {
            const btn = event.relatedTarget;
            const item = btn.getAttribute('data-item') || '';
            document.getElementById('itemField').value = item;
        });

        document.getElementById('reportForm').addEventListener('submit', (e) => {
            e.preventDefault();

            // TODO: send to backend / email / Google Sheets / etc.
            // For now:
            alert("Sent report (demo).");
        });
    </script>


</body>

</html>